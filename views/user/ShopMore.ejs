<%- include('../layout/header') %>

<link rel="stylesheet" href="css/mystyle.css">
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">

<!-- Animate.css -->
<link rel="stylesheet" href="css/animate.css">
<!-- Icomoon Icon Fonts-->
<link rel="stylesheet" href="css/icomoon.css">
<!-- Ion Icon Fonts-->
<link rel="stylesheet" href="css/ionicons.min.css">
<!-- Bootstrap  -->
<link rel="stylesheet" href="css/bootstrap.min.css">

<!-- Magnific Popup -->
<link rel="stylesheet" href="css/magnific-popup.css">

<!-- Flexslider  -->
<link rel="stylesheet" href="css/flexslider.css">

<!-- Owl Carousel -->
<link rel="stylesheet" href="css/owl.carousel.min.css">
<link rel="stylesheet" href="css/owl.theme.default.min.css">

<!-- Date Picker -->
<link rel="stylesheet" href="css/bootstrap-datepicker.css">
<!-- Flaticons  -->
<link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">

<!-- Theme style  -->
<link rel="stylesheet" href="css/style.css">

	<div class="colorlib-loader"></div>

	<div id="page">
		
		<nav class="colorlib-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
						
                        <div class="d-flex align-items-center col-sm-7 col-md-9 font-monospace">
							<i class="fa-brands fa-wizards-of-the-coast" style="color: #000000; font-size: 3rem;  "></i>
							<div id="colorlib-logo">Wizcart</div>
						</div>


						<div class="col-sm-5 col-md-3  mt-5" style="margin-left: -104px; ">
							<div class="col-sm-5 col-md-3" style="margin-left: -104px;margin-top: 1">
								<input type="search" id="searchInput" name="search" 
								class="form-control border-primary rounded-pill shadow-sm"
								style="margin-top: 5px; width: 350px; background-color: #e0f7fa; color: #00796b; border-color: #00796b;" 
								placeholder="Search">							</div>
							  
						 </div>
		         </div>
					<div class="row">
						<div class="col-sm-12 text-left menu-1">
							<ul>
								<li class="active"><a>Home</a></li>
								
								<li><a href="">upcoming launches</a></li>
								<li><a href="">About</a></li>
								<li><a href="">Contact</a></li>
							
                                  
                                <li class="cart">
									<a href="/cart">
									  <i class="icon-shopping-cart"></i>
									  CART 

									  <% if (typeof cartQuantity !== 'undefined') { %>
                                             
									  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
								        <%=cartQuantity%>
                               



										<span class="visually-hidden">unread messages</span>
									  </span>
										<% } %>


									</a>
								  </li>


								

								  <% if (typeof user !== 'undefined' && user !== null) { %>
								    <div class="dropdown profile " style="position: absolute; top: -80px; left: 92%; right: 0;">
										<a class="btn dropdown-toggle text-white" style="background-color: #2c313098;" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
											<i class="fa-solid fa-user" style="color: #000000; font-size: 1.5rem;"></i> <%=user.name %>
										</a>
									
										<ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
											<li><a class="dropdown-item" href="/profile"><i class="fa-solid fa-file-invoice"></i> MY ACCOUNT</a></li>
											<li><a class="dropdown-item" href="/getOrderHistory"><i class="fa-solid fa-truck"></i> My Orders</a></li>
											<li><a class="dropdown-item" href="/wallet"><<i class="fa-solid fa-wallet" style="color: #000000;"></i>"></i>WALLET</a></li>

											<li><a class="dropdown-item" href="#"><i class="fa-solid fa-heart"></i> Wishlist</a></li>
											<li><a class="dropdown-item" href="/logout"><i class="fa-solid fa-right-from-bracket"></i> Log Out</a></li>
										</ul>
									</div>
									
									<% } else { %>
										<div class="dropdown profile " style="position: absolute; top: -80px; left: 92%; right: 0;">
											<a class="btn  dropdown-toggle text-white" style="background-color: #2c313098;" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
												<i class="fa-solid fa-user " style="color: #000000; font-size: 1.5rem;"></i> LOGIN  %>
											</a>
										
											<ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
											
												<li><a class="dropdown-item" href="/login"><i class="fa-solid fa-right-from-bracket"></i> LOGIN</a></li>
											</ul>
										</div>
									



									  <% } %>




								 
								
							</ul>
						</div>
						
					</div>
				</div>
			</div>
			<div class="sale">
				<div class="container">
					<div class="row">
						<div class="col-sm-8 offset-sm-2 text-center">
							<div class="row">
								<div class="owl-carousel2">
									<div class="item">
										
									</div>
									<div class="item">
									
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</nav>

		<div class="breadcrumbs">
			<div class="container">
				<div class="row">
					<div class="col">
						<p class="bread"><span><a href="/home">Home</a></span> / <span>shop</span></p>
					</div>
				</div>
			</div>
		</div>

		<div class="breadcrumbs-two">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="breadcrumbs-img" style="background-image: url(https://www.samsungmobilepress.com/file/3EB364FF47D766E18838CAD7C1710C36E5872B860135BED1F0670C253F915840FDD2274E830B946438E0F170C61B3E0C04B3A82DB4056DD513ED9BE8277D9627C71543B53CC761B158DE05CB5318B16802BCC9EF00215B7787FEAEFEAA087FB8BD5A24EC6633AF9717FF93591F45D846927083277A10824CBC2F12518A4106C3);">
							<!-- <h2>Women's</h2> -->
						</div>
						<div class="menu text-center">
							<p><a href="#">I PHONE</a> <a href="#">SAMSUNG</a> <a href="#">PIXEL</a> <a href="#">ASUS</a></p>
						</div>
					</div>
				</div>
			</div>
		</div>
          
		
 



		<div class="colorlib-featured">
			<div class="container">
				<div class="row">
					<div class="col-sm-4 text-center">
						<div class="featured">
							<div class="featured-img featured-img-2" style="background-image: url(https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/store-card-40-apple-pencil-202405?wid=800&hei=1000&fmt=png-alpha&.v=1716327768944);">
								<h2 style="color: #000000;"></h2>
								<h2>FlagShip</h2>
								<p><a href="#" class="btn btn-primary btn-lg">Shop now</a></p>
							</div>
						</div>
					</div>
					<div class="col-sm-4 text-center">
						<div class="featured">
							<div class="featured-img featured-img-2" style="background-image: url(https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/store-card-40-iphone-15-pro-202309?wid=800&hei=1000&fmt=p-jpg&qlt=95&.v=1692910040844);">
								<h2>midrange</h2>
								<p><a href="#" class="btn btn-primary btn-lg">Shop now</a></p>
							</div>
						</div>
					</div>
					<div class="col-sm-4 text-center">
						<div class="featured">
							<div class="featured-img featured-img-2" style="background-image: url(https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/store-card-40-ipad-pro-202405?wid=800&hei=1000&fmt=p-jpg&qlt=95&.v=1713308272816);">
								<h2>budget</h2>
								<p><a href="#" class="btn btn-primary btn-lg">Shop now</a></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="colorlib-product">
			<div class="container">


				
				<div class="col-lg-4 ">
					
					  <h3 class="h5 mb-3">Sort By</h3>
					  <form id="sortForm">
						<div class="form-group">
						  <label for="sortSelect" class="form-label">Sort By:</label>
						  <select id="sortSelect" class="form-select" name="sort">
							<option value="/">Default</option>
							<option value="lowtohigh" <% if (sortOption === 'lowtohigh') { %>selected<% } %>>Price: Low to High</option>
							<option value="hightolow" <% if (sortOption === 'hightolow') { %>selected<% } %>>Price: High to Low</option>
							<option value="atoz" <% if (sortOption === 'atoz') { %>selected<% } %>>Name: A to Z</option>
							<option value="ztoa" <% if (sortOption === 'ztoa') { %>selected<% } %>>Name: Z to A</option>
							<option value="newArrivals" <% if (sortOption === 'ztoa') { %>selected<% } %>>NEW ARRIVALS</option>
						  </select>
						</div>
						<button type="submit" class="btn btn-primary mt-3">Apply Sort</button>
					  </form>
					
				  </div>
				 
				<div class="row">
					<div class="col-sm-">
					
					  </div>
					<div class="col-lg-3 col-xl-3">
						<!-- Advanced Search Sidebar -->
						<div class="row">
							<div class="col-sm-12">
								<div class="side border mb-1">
									<h3>Advanced Search</h3>
									<form id="advancedSearchForm">
										<div class="form-group " hidden >
											<label for="categorySelect">Category:</label>
											<select id="categorySelect" class="form-control">
												<option value="">All Categories</option>
												<% category.forEach(e => { %>
													<% if (e.Hide_category === 0) { %>
														<option value="<%= e.category_name %>"><%= e.category_name %></option>
													<% } %>
												<% }) %>
											</select>
										</div>
										<div class="form-group">
											<label for="minPrice">Min Price:</label>
											<input type="number" id="minPrice" class="form-control" min="0">
										</div>
										<div class="form-group">
											<label for="maxPrice">Max Price:</label>
											<input type="number" id="maxPrice" class="form-control" min="0">
										</div>
										<button type="submit" class="btn btn-primary">Apply Filters</button>
										
									</form>
								</div>
							</div>
							<div class="col-sm-12">
								<div class="side border mb-1">
								  <h3>Category</h3>
								  <ul>
									<% category.forEach(e => { %>
									  <% if (e.Hide_category === 0) { %>
										<li>
										  <a href="/shopmore?pageNum=1&category=<%= e.category_name %>&search=<%= searchQuery %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&brand=<%= queryBrand %>">
											<%= e.category_name %>
										  </a>
										</li>
									  <% } %>
									<% }) %>
								  </ul>
								  <br>
								  <a href="/shopmore"  class="btn btn-primary">remove all Filters</a>
								</div>
							  </div>

							  <div class="col-sm-12">
								<div class="side border mb-1">
								  <h3>Brand</h3>
								  <ul>
									<% brands.forEach(brand => { %>
									  <% if (brand) { %>
										<li>
										  <a href="/shopmore?pageNum=1&category=<%= queryCategory %>&search=<%= searchQuery %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&brand=<%= brand %>">
											<%= brand %>
										  </a>
										</li>
									  <% } %>
									<% }) %>
								  </ul>
								</div>
							  </div>
						
						</div>
					</div>
					<div class="col-lg-9 col-xl-9">
						<div id="productContainer" class="row row-pb-md">
							<% if (typeof queryName !== 'undefined') { %>
								<h3><%=queryName%></h3>
							<% } %>
							<% products.forEach(element => { %>
								<% if (element.Hide_product === 0) { %>
									<div class="col-lg-4 mb-4 text-center">
										<div class="product-entry border" data-category="<%= element.category %>" data-price="<%= element.price %>">
											<a href="/singleProduct<%= element.id %>" class="prod-img">
												<img src="<%= element.product_img[0] %>" class="img-fluid" alt="Product Image">
											</a>
											<div class="desc">
												<h2><a href="/singleProduct<%= element.id %>"><%= element.product_name %></a></h2>
												<span class="price">â‚¹<%= element.price %></span>
											</div>
										</div>
									</div>
								<% } %>
							<% }) %>
						</div>
					</div>
				</div>
			</div>
		</div>
 


		</div>


		<div class="row">
			<div class="col-md-12 text-center">
				<div class="block-27">
			   <ul>
			    <% for (let i = 1; i <= totalPages; i++) { %>
					
		           <li><a  href="/shopmore?page=<%= i %>&search=<%= searchQuery %>&minPrice=<%= minPrice %>&maxPrice=<%= maxPrice %>&brand=<%= queryBrand %>&category=<%= queryCategory %>&sort=<%= sortOption %>"> <%=i%> </a></li>
					</li>
				  <% } %>
				 
				
			   </ul>
			</div>
			</div>
		</div>

		<div class="colorlib-partner">
			<div class="container">
				<div class="row">
					<div class="col-sm-8 offset-sm-2 text-center colorlib-heading colorlib-heading-sm">
						<h2>Trusted Partners</h2>
					</div>
				</div>
			
			</div>
		</div>

		<footer id="colorlib-footer" role="contentinfo">
			<div class="container">
				<div class="row row-pb-md">
					<div class="col footer-col colorlib-widget">
						<h4>About Footwear</h4>
						<p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life</p>
						<p>
							<ul class="colorlib-social-icons">
								<li><a href="#"><i class="icon-twitter"></i></a></li>
								<li><a href="#"><i class="icon-facebook"></i></a></li>
								<li><a href="#"><i class="icon-linkedin"></i></a></li>
								<li><a href="#"><i class="icon-dribbble"></i></a></li>
							</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Customer Care</h4>
						<p>
							<ul class="colorlib-footer-links">
								<li><a href="#">Contact</a></li>
								<li><a href="#">Returns/Exchange</a></li>
								<li><a href="#">Gift Voucher</a></li>
								<li><a href="#">Wishlist</a></li>
								<li><a href="#">Special</a></li>
								<li><a href="#">Customer Services</a></li>
								<li><a href="#">Site maps</a></li>
							</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Information</h4>
						<p>
							<ul class="colorlib-footer-links">
								<li><a href="#">About us</a></li>
								<li><a href="#">Delivery Information</a></li>
								<li><a href="#">Privacy Policy</a></li>
								<li><a href="#">Support</a></li>
								<li><a href="#">Order Tracking</a></li>
							</ul>
						</p>
					</div>

					<div class="col footer-col">
						<h4>News</h4>
						<ul class="colorlib-footer-links">
							<li><a href="blog.html">Blog</a></li>
							<li><a href="#">Press</a></li>
							<li><a href="#">Exhibitions</a></li>
						</ul>
					</div>

					<div class="col footer-col">
						<h4>Contact Information</h4>
						<ul class="colorlib-footer-links">
							<li>291 South 21th Street, <br> Suite 721 New York NY 10016</li>
							<li><a href="tel://1234567920">+ 1235 2355 98</a></li>
							<li><a href="mailto:info@yoursite.com">info@yoursite.com</a></li>
							<li><a href="#">yoursite.com</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="copy">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p>
							<span><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></span> 
							<span class="block">Demo Images: <a href="http://unsplash.co/" target="_blank">Unsplash</a> , <a href="http://pexels.com/" target="_blank">Pexels.com</a></span>
						</p>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>
	


<!-- jQuery -->
<script src="js/jquery.min.js"></script>
<!-- popper -->
<script src="js/popper.min.js"></script>
<!-- bootstrap 4.1 -->
<script src="js/bootstrap.min.js"></script>
<!-- jQuery easing -->
<script src="js/jquery.easing.1.3.js"></script>
<!-- Waypoints -->
<script src="js/jquery.waypoints.min.js"></script>
<!-- Flexslider -->
<script src="js/jquery.flexslider-min.js"></script>
<!-- Owl carousel -->
<script src="js/owl.carousel.min.js"></script>
<!-- Magnific Popup -->
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/magnific-popup-options.js"></script>
<!-- Date Picker -->
<script src="js/bootstrap-datepicker.js"></script>
<!-- Stellar Parallax -->
<script src="js/jquery.stellar.min.js"></script>
<!-- Main -->
<script src="js/main.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const advancedSearchForm = document.getElementById('advancedSearchForm');
    const categorySelect = document.getElementById('categorySelect');
    const minPriceInput = document.getElementById('minPrice');
    const maxPriceInput = document.getElementById('maxPrice');
    const productContainer = document.getElementById('productContainer');
    const products = productContainer.getElementsByClassName('product-entry');

    function filterProducts() {
        const searchTerm = searchInput.value.toLowerCase().trim();
        const selectedCategory = categorySelect.value.toLowerCase();
        const minPrice = parseFloat(minPriceInput.value) || 0;
        const maxPrice = parseFloat(maxPriceInput.value) || Infinity;

        Array.from(products).forEach(product => {
            const productName = product.querySelector('h2 a').textContent.toLowerCase();
            const productCategory = product.dataset.category.toLowerCase();
            const productPrice = parseFloat(product.dataset.price);

            const matchesSearch = searchTerm === '' || productName.includes(searchTerm);
            const matchesCategory = selectedCategory === '' || productCategory === selectedCategory;
            const matchesPrice = productPrice >= minPrice && productPrice <= maxPrice;

            if (matchesSearch && matchesCategory && matchesPrice) {
                product.closest('.col-lg-4').style.display = "";
            } else {
                product.closest('.col-lg-4').style.display = "none";
            }
        });
    }

    searchInput.addEventListener('input', filterProducts);
    advancedSearchForm.addEventListener('submit', function(e) {
        e.preventDefault();
        filterProducts();
    });

    // Trigger initial filter on page load
    filterProducts();
});
</script>

</body>
</html>